#!/bin/bash

echo "Refreshing Kea logic types and running the TypeScript compiler in dry mode..."
echo

yarn typegen:write &> /dev/null

ERRORS=$(yarn typescript:check --strict 2> /dev/null | grep error | grep frontend)
ERRORS_COUNT=$(echo "${ERRORS}" | wc -l)

if test -z "${ERRORS}"
then
    echo "No TypeScript errors found in this PR! ðŸš€"
    exit 0
else
    echo "Found ${ERRORS_COUNT} TypeScript errors in this PR! ðŸ’¥"
    echo "${ERRORS}"
    exit 1
fi
